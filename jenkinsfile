pipeline {
   agent any
   stages {
       stage('Build') {
           steps {
               sh label: '', script: '''#! /bin/bash
               sudo docker build -t ashurana31/firstimage:Automate_Push .'''
           }
       }
       
      
   stage('Pushing') {
           steps {
               sh label: '', script: '''#! /bin/bash
               docker.withRegistry('http://docker.io/ashurana31','Dockerhub_credentials'){
               docker.image('ashurana31/firstimage:Automate_Push').push()
               }'''
           }
         }
          
       }
     }

