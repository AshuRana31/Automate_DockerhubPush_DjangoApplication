pipeline {
   agent any
   stages {
       stage('Build') {
           steps {
               sh label: '', script: '''#! /bin/bash
               sudo docker build -t ashurana31/firstimage:Automate_Push .'''
           }
       }
       
      
   stage('Pushing') {
           steps {
               script{
               sudo chmod 666 /var/run/docker.sock
               withDockerRegistry([url: 'https://registry.hub.docker.com', credentialsId: 'Dockerhub_credentials'])
               {
               docker.image('ashurana31/firstimage:Automate_Push').push()
               }
             }
           }
         }
         } 
       }
     

